from PIL import Image, ImageDraw, ImageFont
from itertools import cycle

piece_tables = {
    "PAWN": [0, 0, 0, 0, 0, 0, 0, 0,
             50, 50, 50, 50, 50, 50, 50, 50,
             10, 10, 20, 30, 30, 20, 10, 10,
             5, 5, 10, 27, 27, 10, 5, 5,
             0, 0, 0, 25, 25, 0, 0, 0,
             5, -5, -10, 0, 0, -10, -5, 5,
             5, 10, 10, -25, -25, 10, 10, 5,
             0, 0, 0, 0, 0, 0, 0, 0],
    "KNIGHTS": [
        -50, -40, -30, -30, -30, -30, -40, -50,
        -40, -20, 0, 0, 0, 0, -20, -40,
        -30, 0, 10, 15, 15, 10, 0, -30,
        -30, 5, 15, 20, 20, 15, 5, -30,
        -30, 0, 15, 20, 20, 15, 0, -30,
        -30, 5, 10, 15, 15, 10, 5, -30,
        -40, -20, 0, 5, 5, 0, -20, -40,
        -50, -40, -20, -30, -30, -20, -40, -50,
    ],
    "BISHOP": [
        -20, -10, -10, -10, -10, -10, -10, -20,
        -10, 0, 0, 0, 0, 0, 0, -10,
        -10, 0, 5, 10, 10, 5, 0, -10,
        -10, 5, 5, 10, 10, 5, 5, -10,
        -10, 0, 10, 10, 10, 10, 0, -10,
        -10, 10, 10, 10, 10, 10, 10, -10,
        -10, 5, 0, 0, 0, 0, 5, -10,
        -20, -10, -40, -10, -10, -40, -10, -20,
    ],
    "ROOK": [10, 10, -10, 10, 10, -10, 10, 10,
             10, 10, -10, 10, 10, -10, 10, 10,
             10, 10, -10, 10, 10, -10, 10, 10,
             10, 10, -10, 10, 10, -10, 10, 10,
             10, 10, -10, 10, 10, -10, 10, 10,
             10, 10, -10, 10, 10, -10, 10, 10,
             10, 10, -10, 10, 10, -10, 10, 10,
             20, 10, -10, 50, 10, 50, 10, 20],
    "KING": [-30, -40, -40, -50, -50, -40, -40, -30,
             -30, -40, -40, -50, -50, -40, -40, -30,
             -30, -40, -40, -50, -50, -40, -40, -30,
             -30, -40, -40, -50, -50, -40, -40, -30,
             -20, -30, -30, -40, -40, -30, -30, -20,
             -10, -20, -20, -20, -20, -20, -20, -10,
             20, 20, 0, 0, 0, 0, 20, 20,
             20, 30, 10, 0, 0, 10, 50, 20],
    "QUEEN": [50, 50, 50, 50, 50, 50, 50, 50,
             0, 0, 0, 0, 0, 0, 0, 0,
             0, 0, 0, 0, 0, 0, 0, 0,
             0, 0, 0, 0, 0, 0, 0, 0,
             0, 0, 0, 0, 0, 0, 0, 0,
             0, 0, 0, 0, 0, 0, 0, 0,
             0, 0, 0, 0, 0, 0, 0, 0,
             0, 0, 0, 10, 0, 0, 0, 0],
}

width = 500
if __name__ == '__main__':
    fnt = ImageFont.load_default(30)
    for name, table in piece_tables.items():
        print(f"const {name}_TABLE: [f32; 64] = [{','.join(str(float(score)) for score in table)}];")

        im = Image.new(mode="RGB", size=(width, width))

        d = ImageDraw.Draw(im)

        squares = (list(map(lambda i: i*width / 8, [i, j, i+1, j+1]))
                   for i_start, j in zip(cycle((0, 1)), range(8))
                   for i in range(i_start, 8, 2))

        for sq, value in zip(squares, table[::2]):
            d.rectangle(sq, fill='white')
            d.multiline_text(sq[:2], str(value), font=fnt, fill=(0, 0, 0))

        squares = (list(map(lambda i: i*width / 8, [i, j, i+1, j+1]))
                   for i_start, j in zip(cycle((1, 0)), range(8))
                   for i in range(i_start, 8, 2))

        for sq, value in zip(squares, table[1::2]):
            #d.rectangle(sq, fill='white')
            d.multiline_text(sq[:2], str(value), font=fnt, fill=(255, 255, 255))

        # im.show()
        im.save(f"./assets/piece_tables/{name}.png")